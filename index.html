<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Convertir Extractos Bancarios PDF a Excel</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Montserrat:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <main class="shell">
    <header class="hero">
      <div class="brand">
        <img class="logo" src="./Logo mIAmi Lab.png" alt="mIAmi Lab" />
      </div>
      <div class="heroText">
        <h1>mIAmi Lab Extractos Bancarios PDF a Excel</h1>
        <p class="subtitle">Elegí el banco, subí uno o varios PDFs y descargá el Excel listo.</p>
        <div class="creditsWrap">
          <span class="creditsBadge" id="creditsBadge">Créditos: 0</span>
          <span class="creditsRule">Hasta 2.4 MB: 1 crédito · Más de 2.4 MB: 2 créditos</span>
        </div>
      </div>
    </header>

    <section class="steps" aria-label="Flujo de 3 pasos">
      <div class="step active" data-step="1"><span class="num">1</span><div><strong>Autenticación</strong><small>Crear usuario / iniciar sesión / cargar créditos</small></div></div>
      <div class="stepLine"></div>
      <div class="step" data-step="2"><span class="num">2</span><div><strong>Subir PDFs</strong><small>Seleccionar banco y archivos</small></div></div>
      <div class="stepLine"></div>
      <div class="step" data-step="3"><span class="num">3</span><div><strong>Procesar</strong><small>Descargar Excel resultante</small></div></div>
    </section>

    <section class="card">
      <form id="uploadForm" class="form">
        <div class="field authBlock">
          <label class="label">Paso 1: Cuenta y créditos</label>
          <div class="grid2">
            <div>
              <label class="labelMini" for="emailInput">Email</label>
              <input id="emailInput" class="input" type="email" placeholder="tu@email.com" />
            </div>
            <div>
              <label class="labelMini" for="passwordInput">Contraseña</label>
              <input id="passwordInput" class="input" type="password" placeholder="mínimo 6 caracteres" />
            </div>
          </div>
          <div class="btnRow">
            <button id="registerBtn" type="button" class="btnSmall">Crear usuario</button>
            <button id="loginBtn" type="button" class="btnSmall">Iniciar sesión</button>
            <button id="logoutBtn" type="button" class="btnSmall ghost">Cerrar sesión</button>
          </div>

          <div class="grid2 payRow">
            <div>
              <label class="labelMini" for="amountInput">Monto para cargar créditos (USD)</label>
              <input id="amountInput" class="input" type="number" step="1" min="1" value="10" />
            </div>
            <div class="btnAlignBottom">
              <button id="payBtn" type="button" class="btnSmall">Cargar créditos</button>
            </div>
          </div>

          <div id="authStatus" class="status"></div>
          <div id="paymentStatus" class="status"></div>
        </div>

        <hr class="sep" />

        <div class="grid">
          <div class="field">
            <label class="label" for="bankSelect">Paso 2: Banco</label>
            <select class="select" id="bankSelect" name="bank">
              <option value="macro">Banco Macro</option>
              <option value="santander">Banco Santander</option>
              <option value="nacion">Banco Nación</option>
            </select>
          </div>
        </div>

        <div class="field">
          <label class="label">Paso 2: PDF de extracto</label>
          <label id="dropzone" class="dropzone" for="fileInput">
            <div class="dzIcon" aria-hidden="true">⬇</div>
            <div class="dzText">
              <div class="dzTitle">Arrastrá y soltá tus PDFs acá</div>
              <div class="dzSub">o hacé click para seleccionar</div>
              <div class="dzFile" id="fileName"></div>
              <div class="dzSub" id="fileSizeInfo">Tamaño total: 0.0 KB (1 crédito)</div>
            </div>
            <button id="clearFile" class="linkBtn" type="button">Quitar</button>
          </label>
          <input id="fileInput" class="hiddenInput" type="file" accept="application/pdf" multiple />
          <p class="hint">Regla de créditos: hasta 2.4 MB se descuenta 1 crédito; si supera 2.4 MB se descuentan 2 créditos.</p>
          <div id="status" class="status"></div>
        </div>

        <div class="field">
          <label class="label">Modo de descarga</label>
          <div class="radioRow">
            <label class="radioItem"><input type="radio" name="downloadMode" value="single" checked /> Descargar uno por uno</label>
            <label class="radioItem"><input type="radio" name="downloadMode" value="merged" /> Descargar unificados</label>
          </div>
        </div>

        <button id="submitBtn" class="btn" type="submit">Paso 3: Convertir y descargar Excel</button>
      </form>
    </section>

    <footer class="footer">POWERED by MIAMI LAB ©</footer>
  </main>

  <script src="./config.js"></script>
  <script src="./script.js"></script>
</body>
</html>
